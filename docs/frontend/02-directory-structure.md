# ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ãƒ»è¨­è¨ˆåŸå‰‡

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªãƒ„ãƒªãƒ¼

```
frontend/
â”œâ”€â”€ public/                              # é™çš„ãƒ•ã‚¡ã‚¤ãƒ«
â”‚   â””â”€â”€ favicon.ico
â”‚
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ app/                             # ===== Next.js App Router =====
â”‚   â”‚   â”œâ”€â”€ globals.css                  #   Tailwind v4 ãƒ‡ã‚£ãƒ¬ã‚¯ãƒ†ã‚£ãƒ– + CSS å¤‰æ•° (shadcn ãƒ†ãƒ¼ãƒ)
â”‚   â”‚   â”œâ”€â”€ layout.tsx                   #   ãƒ«ãƒ¼ãƒˆãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆ (Providers, Header, Footer)
â”‚   â”‚   â”œâ”€â”€ page.tsx                     #   ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ (/) â€” ãƒ©ãƒ³ã‚­ãƒ³ã‚°3ã‚»ã‚¯ã‚·ãƒ§ãƒ³
â”‚   â”‚   â”œâ”€â”€ page.module.scss             #   ãƒˆãƒƒãƒ—ãƒšãƒ¼ã‚¸ç”¨ SCSS
â”‚   â”‚   â”œâ”€â”€ loading.tsx                  #   ã‚°ãƒ­ãƒ¼ãƒãƒ«ãƒ­ãƒ¼ãƒ‡ã‚£ãƒ³ã‚° UI
â”‚   â”‚   â”œâ”€â”€ not-found.tsx                #   404 ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”œâ”€â”€ error.tsx                    #   ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚¨ãƒ©ãƒ¼ãƒã‚¦ãƒ³ãƒ€ãƒª
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ auth/                        # --- èªè¨¼ ---
â”‚   â”‚   â”‚   â”œâ”€â”€ login/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx             #     ãƒ­ã‚°ã‚¤ãƒ³ãƒšãƒ¼ã‚¸ (GitHub / Google ãƒœã‚¿ãƒ³)
â”‚   â”‚   â”‚   â””â”€â”€ callback/
â”‚   â”‚   â”‚       â””â”€â”€ route.ts             #     OAuth ã‚³ãƒ¼ãƒ«ãƒãƒƒã‚¯ (Route Handler)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ plots/                       # --- Plot (Wiki) ---
â”‚   â”‚   â”‚   â”œâ”€â”€ page.tsx                 #     Plot ä¸€è¦§ãƒšãƒ¼ã‚¸ (/plots?tag=xxx)
â”‚   â”‚   â”‚   â”œâ”€â”€ new/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ page.tsx             #     Plot æ–°è¦ä½œæˆ (èªè¨¼å¿…é ˆ)
â”‚   â”‚   â”‚   â””â”€â”€ [id]/
â”‚   â”‚   â”‚       â”œâ”€â”€ page.tsx             #     Plot è©³ç´°ãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚       â”œâ”€â”€ page.module.scss     #     Plot è©³ç´°ç”¨ SCSS
â”‚   â”‚   â”‚       â””â”€â”€ history/
â”‚   â”‚   â”‚           â””â”€â”€ page.tsx         #     å±¥æ­´ãƒ»å¾©å…ƒãƒšãƒ¼ã‚¸
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ search/                      # --- æ¤œç´¢ ---
â”‚   â”‚   â”‚   â””â”€â”€ page.tsx                 #     æ¤œç´¢çµæœãƒšãƒ¼ã‚¸ (/search?q=xxx)
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ profile/                     # --- ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ« ---
â”‚   â”‚       â””â”€â”€ [username]/
â”‚   â”‚           â””â”€â”€ page.tsx             #     ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«ãƒšãƒ¼ã‚¸
â”‚   â”‚
â”‚   â”œâ”€â”€ components/                      # ===== React ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ =====
â”‚   â”‚   â”œâ”€â”€ ui/                          #   shadcn/ui è‡ªå‹•ç”Ÿæˆ (è§¦ã‚‰ãªã„)
â”‚   â”‚   â”‚   â”œâ”€â”€ button.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ card.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ input.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ badge.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ avatar.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ skeleton.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ dialog.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ dropdown-menu.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ sheet.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ separator.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ tabs.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ tooltip.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ form.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ sonner.tsx
â”‚   â”‚   â”‚   â””â”€â”€ ...
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ layout/                      #   ãƒ¬ã‚¤ã‚¢ã‚¦ãƒˆç³»
â”‚   â”‚   â”‚   â”œâ”€â”€ Header/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Header.tsx           #     ãƒ˜ãƒƒãƒ€ãƒ¼ (ãƒ­ã‚´, æ¤œç´¢, ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ¡ãƒ‹ãƒ¥ãƒ¼)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Header.module.scss
â”‚   â”‚   â”‚   â”œâ”€â”€ Footer/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ Footer.tsx           #     ãƒ•ãƒƒã‚¿ãƒ¼
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ Footer.module.scss
â”‚   â”‚   â”‚   â””â”€â”€ MobileNav/
â”‚   â”‚   â”‚       â”œâ”€â”€ MobileNav.tsx        #     ãƒ¢ãƒã‚¤ãƒ«ãƒŠãƒ“ã‚²ãƒ¼ã‚·ãƒ§ãƒ³ (Sheet)
â”‚   â”‚   â”‚       â””â”€â”€ MobileNav.module.scss
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ plot/                        #   Plot é–¢é€£
â”‚   â”‚   â”‚   â”œâ”€â”€ PlotCard/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PlotCard.tsx         #     ä¸€è¦§ç”¨ã‚«ãƒ¼ãƒ‰
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PlotCard.module.scss
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PlotCard.test.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ PlotList/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PlotList.tsx         #     PlotCard ã®ãƒªã‚¹ãƒˆè¡¨ç¤º
â”‚   â”‚   â”‚   â”œâ”€â”€ PlotForm/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ PlotForm.tsx         #     ä½œæˆ/ç·¨é›†ãƒ•ã‚©ãƒ¼ãƒ 
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ PlotForm.test.tsx
â”‚   â”‚   â”‚   â””â”€â”€ PlotDetail/
â”‚   â”‚   â”‚       â”œâ”€â”€ PlotDetail.tsx       #     è©³ç´°è¡¨ç¤º (ãƒ¡ã‚¿æƒ…å ± + ã‚»ã‚¯ã‚·ãƒ§ãƒ³ä¸€è¦§)
â”‚   â”‚   â”‚       â””â”€â”€ PlotDetail.module.scss
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ section/                     #   ã‚»ã‚¯ã‚·ãƒ§ãƒ³é–¢é€£
â”‚   â”‚   â”‚   â”œâ”€â”€ SectionViewer/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SectionViewer.tsx    #     ã‚»ã‚¯ã‚·ãƒ§ãƒ³é–²è¦§ (ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ æ›´æ–°å¯¾å¿œ)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SectionViewer.module.scss
â”‚   â”‚   â”‚   â”œâ”€â”€ SectionEditor/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SectionEditor.tsx    #     Tiptap ç·¨é›† (ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ­ãƒƒã‚¯çµ±åˆ)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SectionEditor.module.scss
â”‚   â”‚   â”‚   â”œâ”€â”€ SectionLockBadge/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ SectionLockBadge.tsx #     ã€ŒğŸ”’ â—‹â—‹ãŒç·¨é›†ä¸­ã€ãƒãƒƒã‚¸
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ SectionLockBadge.module.scss
â”‚   â”‚   â”‚   â””â”€â”€ SectionList/
â”‚   â”‚   â”‚       â””â”€â”€ SectionList.tsx      #     ã‚»ã‚¯ã‚·ãƒ§ãƒ³ã®ä¸€è¦§ (ä¸¦ã³æ›¿ãˆ + ãƒ­ãƒƒã‚¯çŠ¶æ…‹è¡¨ç¤º)
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ editor/                      #   Tiptap ã‚¨ãƒ‡ã‚£ã‚¿é–¢é€£
â”‚   â”‚   â”‚   â”œâ”€â”€ TiptapEditor/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ TiptapEditor.tsx     #     Tiptap ã‚³ã‚¢ãƒ©ãƒƒãƒ‘ãƒ¼
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ TiptapEditor.module.scss
â”‚   â”‚   â”‚   â””â”€â”€ EditorToolbar/
â”‚   â”‚   â”‚       â”œâ”€â”€ EditorToolbar.tsx    #     ãƒ„ãƒ¼ãƒ«ãƒãƒ¼ (Bold, Italic, Color, etc.)
â”‚   â”‚   â”‚       â””â”€â”€ EditorToolbar.module.scss
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ auth/                        #   èªè¨¼é–¢é€£
â”‚   â”‚   â”‚   â”œâ”€â”€ LoginButton/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ LoginButton.tsx      #     OAuth ãƒ­ã‚°ã‚¤ãƒ³ãƒœã‚¿ãƒ³
â”‚   â”‚   â”‚   â”œâ”€â”€ UserMenu/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UserMenu.tsx         #     ãƒ­ã‚°ã‚¤ãƒ³æ¸ˆãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³
â”‚   â”‚   â”‚   â””â”€â”€ AuthGuard/
â”‚   â”‚   â”‚       â””â”€â”€ AuthGuard.tsx        #     èªè¨¼å¿…é ˆãƒ©ãƒƒãƒ‘ãƒ¼
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ sns/                         #   SNS æ©Ÿèƒ½
â”‚   â”‚   â”‚   â”œâ”€â”€ StarButton/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ StarButton.tsx       #     ã‚¹ã‚¿ãƒ¼ãƒœã‚¿ãƒ³ (ãƒˆã‚°ãƒ«)
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ StarButton.test.tsx
â”‚   â”‚   â”‚   â”œâ”€â”€ ForkButton/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ ForkButton.tsx       #     ãƒ•ã‚©ãƒ¼ã‚¯ãƒœã‚¿ãƒ³
â”‚   â”‚   â”‚   â”œâ”€â”€ CommentThread/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ CommentThread.tsx    #     ã‚³ãƒ¡ãƒ³ãƒˆä¸€è¦§
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ CommentThread.module.scss
â”‚   â”‚   â”‚   â””â”€â”€ CommentForm/
â”‚   â”‚   â”‚       â””â”€â”€ CommentForm.tsx      #     ã‚³ãƒ¡ãƒ³ãƒˆæŠ•ç¨¿ãƒ•ã‚©ãƒ¼ãƒ 
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ search/                      #   æ¤œç´¢
â”‚   â”‚   â”‚   â””â”€â”€ SearchBar/
â”‚   â”‚   â”‚       â”œâ”€â”€ SearchBar.tsx        #     æ¤œç´¢å…¥åŠ› (ãƒ˜ãƒƒãƒ€ãƒ¼å†…)
â”‚   â”‚   â”‚       â””â”€â”€ SearchBar.module.scss
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ history/                     #   å±¥æ­´
â”‚   â”‚   â”‚   â”œâ”€â”€ HistoryList/
â”‚   â”‚   â”‚   â”‚   â”œâ”€â”€ HistoryList.tsx      #     ãƒãƒ¼ã‚¸ãƒ§ãƒ³å±¥æ­´ä¸€è¦§
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ HistoryList.module.scss
â”‚   â”‚   â”‚   â””â”€â”€ DiffViewer/
â”‚   â”‚   â”‚       â”œâ”€â”€ DiffViewer.tsx       #     å·®åˆ†è¡¨ç¤º
â”‚   â”‚   â”‚       â””â”€â”€ DiffViewer.module.scss
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ user/                        #   ãƒ¦ãƒ¼ã‚¶ãƒ¼
â”‚   â”‚   â”‚   â”œâ”€â”€ UserCard/
â”‚   â”‚   â”‚   â”‚   â””â”€â”€ UserCard.tsx         #     ãƒ¦ãƒ¼ã‚¶ãƒ¼æƒ…å ±ã‚«ãƒ¼ãƒ‰
â”‚   â”‚   â”‚   â””â”€â”€ UserProfile/
â”‚   â”‚   â”‚       â”œâ”€â”€ UserProfile.tsx      #     ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«è©³ç´°
â”‚   â”‚   â”‚       â””â”€â”€ UserProfile.module.scss
â”‚   â”‚   â”‚
â”‚   â”‚   â””â”€â”€ shared/                      #   æ±ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
â”‚   â”‚       â”œâ”€â”€ TagBadge/
â”‚   â”‚       â”‚   â””â”€â”€ TagBadge.tsx         #     ã‚¿ã‚°è¡¨ç¤ºãƒãƒƒã‚¸
â”‚   â”‚       â”œâ”€â”€ Pagination/
â”‚   â”‚       â”‚   â””â”€â”€ Pagination.tsx       #     ãƒšãƒ¼ã‚¸ãƒãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚       â”œâ”€â”€ EmptyState/
â”‚   â”‚       â”‚   â””â”€â”€ EmptyState.tsx       #     ãƒ‡ãƒ¼ã‚¿ãªã—è¡¨ç¤º
â”‚   â”‚       â””â”€â”€ ErrorMessage/
â”‚   â”‚           â””â”€â”€ ErrorMessage.tsx     #     ã‚¨ãƒ©ãƒ¼è¡¨ç¤º
â”‚   â”‚
â”‚   â”œâ”€â”€ hooks/                           # ===== ã‚«ã‚¹ã‚¿ãƒ  Hooks =====
â”‚   â”‚   â”œâ”€â”€ useAuth.ts                   #   èªè¨¼çŠ¶æ…‹ & ãƒ­ã‚°ã‚¤ãƒ³/ãƒ­ã‚°ã‚¢ã‚¦ãƒˆ
â”‚   â”‚   â”œâ”€â”€ usePlots.ts                  #   Plot ä¸€è¦§/è©³ç´°/CRUD ã‚¯ã‚¨ãƒª
â”‚   â”‚   â”œâ”€â”€ useSections.ts              #   Section CRUD ã‚¯ã‚¨ãƒª
â”‚   â”‚   â”œâ”€â”€ useSectionLock.ts           #   ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ­ãƒƒã‚¯ç®¡ç† (Y.js Awareness ãƒ™ãƒ¼ã‚¹)
â”‚   â”‚   â”œâ”€â”€ useRealtimeSection.ts       #   ã‚»ã‚¯ã‚·ãƒ§ãƒ³å†…å®¹ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ åŒæœŸ (Y.js + Broadcast)
â”‚   â”‚   â”œâ”€â”€ useStar.ts                   #   ã‚¹ã‚¿ãƒ¼ toggle
â”‚   â”‚   â”œâ”€â”€ useSearch.ts                 #   æ¤œç´¢ã‚¯ã‚¨ãƒª
â”‚   â”‚   â”œâ”€â”€ useHistory.ts               #   å±¥æ­´å–å¾—/ãƒ­ãƒ¼ãƒ«ãƒãƒƒã‚¯
â”‚   â”‚   â”œâ”€â”€ useComments.ts              #   ã‚³ãƒ¡ãƒ³ãƒˆå–å¾—/æŠ•ç¨¿
â”‚   â”‚   â””â”€â”€ useUser.ts                   #   ãƒ¦ãƒ¼ã‚¶ãƒ¼ãƒ—ãƒ­ãƒ•ã‚£ãƒ¼ãƒ«å–å¾—
â”‚   â”‚
â”‚   â”œâ”€â”€ lib/                             # ===== ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ & ã‚¤ãƒ³ãƒ•ãƒ© =====
â”‚   â”‚   â”œâ”€â”€ api/                         #   --- API æŠ½è±¡åŒ–ãƒ¬ã‚¤ãƒ¤ãƒ¼ ---
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts               #     HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (fetch ãƒ©ãƒƒãƒ‘ãƒ¼ + ã‚¨ãƒ©ãƒ¼å‡¦ç†)
â”‚   â”‚   â”‚   â”œâ”€â”€ client.test.ts          #     HTTP ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã®ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”‚   â”œâ”€â”€ types.ts                #     å…¨ API ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹å‹å®šç¾©
â”‚   â”‚   â”‚   â”œâ”€â”€ plots.ts                #     Plot ãƒªãƒã‚¸ãƒˆãƒª
â”‚   â”‚   â”‚   â”œâ”€â”€ sections.ts             #     Section ãƒªãƒã‚¸ãƒˆãƒª
â”‚   â”‚   â”‚   â”œâ”€â”€ auth.ts                 #     Auth ãƒªãƒã‚¸ãƒˆãƒª
â”‚   â”‚   â”‚   â”œâ”€â”€ sns.ts                  #     Star / Fork / Comment / Thread ãƒªãƒã‚¸ãƒˆãƒª
â”‚   â”‚   â”‚   â”œâ”€â”€ search.ts              #     Search ãƒªãƒã‚¸ãƒˆãƒª
â”‚   â”‚   â”‚   â”œâ”€â”€ images.ts              #     Image ãƒªãƒã‚¸ãƒˆãƒª
â”‚   â”‚   â”‚   â”œâ”€â”€ history.ts             #     History ãƒªãƒã‚¸ãƒˆãƒª
â”‚   â”‚   â”‚   â””â”€â”€ index.ts               #     ä¸€æ‹¬ re-export
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ supabase/                    #   --- Supabase ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ ---
â”‚   â”‚   â”‚   â”œâ”€â”€ client.ts               #     ãƒ–ãƒ©ã‚¦ã‚¶ç”¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ (createBrowserClient)
â”‚   â”‚   â”‚   â”œâ”€â”€ server.ts               #     Server Component ç”¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ middleware.ts           #     Middleware ç”¨ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆ
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ realtime/                    #   --- Supabase Realtime + Y.js ãƒ©ãƒƒãƒ‘ãƒ¼ ---
â”‚   â”‚   â”‚   â”œâ”€â”€ channel.ts             #     ãƒãƒ£ãƒãƒ«ä½œæˆãƒ»è³¼èª­ãƒ»åˆ‡æ–­ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£
â”‚   â”‚   â”‚   â”œâ”€â”€ awareness.ts           #     Y.js Awareness ãƒ©ãƒƒãƒ‘ãƒ¼ (ã‚»ã‚¯ã‚·ãƒ§ãƒ³ãƒ­ãƒƒã‚¯çŠ¶æ…‹ç®¡ç†)
â”‚   â”‚   â”‚   â””â”€â”€ types.ts               #     SectionAwarenessState, YjsSyncMessage ç­‰
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ mock/                        #   --- Mock ãƒ‡ãƒ¼ã‚¿ (é–‹ç™ºåˆæœŸç”¨) ---
â”‚   â”‚   â”‚   â”œâ”€â”€ data.ts                 #     Mock ãƒ‡ãƒ¼ã‚¿å®šç¾© (plots, users, sections ç­‰)
â”‚   â”‚   â”‚   â”œâ”€â”€ storage.ts              #     ãƒ–ãƒ©ã‚¦ã‚¶ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ Mock (localStorage ä½¿ç”¨)
â”‚   â”‚   â”‚   â”œâ”€â”€ storage.test.ts         #     ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ Mock ãƒ†ã‚¹ãƒˆ
â”‚   â”‚   â”‚   â””â”€â”€ migration.ts            #     Mock ãƒ‡ãƒ¼ã‚¿ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ãƒ»ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³
â”‚   â”‚   â”‚
â”‚   â”‚   â”œâ”€â”€ utils.ts                     #   cn() ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ç­‰ (shadcn ç”Ÿæˆ)
â”‚   â”‚   â”œâ”€â”€ constants.ts                 #   å®šæ•° (ãƒšãƒ¼ã‚¸ã‚µã‚¤ã‚º, åˆ¶é™å€¤)
â”‚   â”‚   â””â”€â”€ query-keys.ts               #   TanStack Query ã‚­ãƒ¼å®šç¾© (ä¸€å…ƒç®¡ç†)
â”‚   â”‚
â”‚   â”œâ”€â”€ providers/                       # ===== Context Providers =====
â”‚   â”‚   â”œâ”€â”€ QueryProvider.tsx            #   TanStack Query Provider
â”‚   â”‚   â”œâ”€â”€ AuthProvider.tsx             #   Supabase Auth Context
â”‚   â”‚   â””â”€â”€ Providers.tsx                #   å…¨ Provider ã‚’çµ±åˆã™ã‚‹ãƒ©ãƒƒãƒ‘ãƒ¼
â”‚   â”‚
â”‚   â”œâ”€â”€ styles/                          # ===== ã‚°ãƒ­ãƒ¼ãƒãƒ« SCSS =====
â”‚   â”‚   â”œâ”€â”€ _variables.scss              #   SCSS å¤‰æ•° (ãƒ–ãƒ¬ã‚¤ã‚¯ãƒã‚¤ãƒ³ãƒˆ, z-index, ç‹¬è‡ªå€¤)
â”‚   â”‚   â”œâ”€â”€ _mixins.scss                 #   SCSS Mixins (ãƒ¬ã‚¹ãƒãƒ³ã‚·ãƒ–, ãƒ†ã‚­ã‚¹ãƒˆçœç•¥, etc.)
â”‚   â”‚   â”œâ”€â”€ _animations.scss             #   ã‚«ã‚¹ã‚¿ãƒ ã‚¢ãƒ‹ãƒ¡ãƒ¼ã‚·ãƒ§ãƒ³å®šç¾©
â”‚   â”‚   â””â”€â”€ _typography.scss             #   ã‚¿ã‚¤ãƒã‚°ãƒ©ãƒ•ã‚£ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ (Tiptap ç”¨)
â”‚   â”‚
â”‚   â”œâ”€â”€ types/                           # ===== å…±é€š TypeScript å‹ =====
â”‚   â”‚   â””â”€â”€ index.ts                     #   ãƒ‰ãƒ¡ã‚¤ãƒ³æ¨ªæ–­ã®å…±é€šå‹ (ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹ã€å®šæ•°å‹ç­‰)
â”‚   â”‚
â”‚   â”œâ”€â”€ test/                            # ===== ãƒ†ã‚¹ãƒˆãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ =====
â”‚   â”‚   â”œâ”€â”€ setup.ts                     #   Vitest ã‚°ãƒ­ãƒ¼ãƒãƒ«ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ— (Testing Library è¨­å®š)
â”‚   â”‚   â””â”€â”€ smoke.test.ts                #   ã‚¹ãƒ¢ãƒ¼ã‚¯ãƒ†ã‚¹ãƒˆ (ç’°å¢ƒæ­£å¸¸æ€§ç¢ºèª)
â”‚   â”‚
â”‚   â””â”€â”€ middleware.ts                    # Next.js ãƒŸãƒ‰ãƒ«ã‚¦ã‚§ã‚¢ (èªè¨¼ã‚¬ãƒ¼ãƒ‰)
â”‚
â”œâ”€â”€ e2e/                                 # Playwright E2E ãƒ†ã‚¹ãƒˆ
â”‚   â”œâ”€â”€ auth.spec.ts
â”‚   â”œâ”€â”€ top-page.spec.ts
â”‚   â”œâ”€â”€ plot-detail.spec.ts
â”‚   â””â”€â”€ full-journey.spec.ts
â”‚
â”œâ”€â”€ biome.json                           # Biome è¨­å®š
â”œâ”€â”€ components.json                      # shadcn/ui è¨­å®š
â”œâ”€â”€ next.config.ts                       # Next.js è¨­å®š
â”œâ”€â”€ package.json
â”œâ”€â”€ playwright.config.ts                 # Playwright è¨­å®š
â”œâ”€â”€ tsconfig.json                        # TypeScript è¨­å®š
â””â”€â”€ vitest.config.ts                     # Vitest è¨­å®š
```

## ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªè¨­è¨ˆåŸå‰‡

| ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒª | åŸå‰‡ |
|-------------|------|
| `app/` | **ãƒ«ãƒ¼ãƒ†ã‚£ãƒ³ã‚°ã®ã¿**ã«è²¬ä»»ã‚’æŒã¤ã€‚ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã¯è–„ãä¿ã¡ã€ãƒ­ã‚¸ãƒƒã‚¯ã¯ `hooks/`ã€è¡¨ç¤ºã¯ `components/` ã«å§”è­²ã™ã‚‹ã€‚ |
| `components/ui/` | **shadcn/ui ãŒè‡ªå‹•ç”Ÿæˆã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã€‚çµ¶å¯¾ã«æ‰‹å‹•ã§ç·¨é›†ã—ãªã„ã€‚** ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã¯å‘¼ã³å‡ºã—å´ã§ `className` prop ã‚’ä½¿ã£ã¦ Tailwind ã‚¯ãƒ©ã‚¹ã‚’è¿½åŠ ã™ã‚‹ã€‚æ–°ã—ã„ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒå¿…è¦ã«ãªã£ãŸã‚‰ã€ã¾ãš [shadcn/ui ã®ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ](https://ui.shadcn.com/) ã§è©²å½“ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆãŒã‚ã‚‹ã‹ç¢ºèªã™ã‚‹ã€‚ |
| `components/{feature}/` | æ©Ÿèƒ½ãƒ‰ãƒ¡ã‚¤ãƒ³ã”ã¨ã«ã‚°ãƒ«ãƒ¼ãƒ”ãƒ³ã‚°ã€‚1 ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ = 1 ãƒ•ã‚©ãƒ«ãƒ€ï¼ˆ`.tsx` + `.module.scss` + `.test.tsx`ï¼‰ã€‚**å†…éƒ¨ã§ã¯ shadcn/ui ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‚’çµ„ã¿åˆã‚ã›ã¦å®Ÿè£…ã™ã‚‹ã€‚** |
| `components/shared/` | 2 ã¤ä»¥ä¸Šã®æ©Ÿèƒ½ãƒ‰ãƒ¡ã‚¤ãƒ³ã§ä½¿ã‚ã‚Œã‚‹æ±ç”¨ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã€‚shadcn/ui ã®è–„ã„ãƒ©ãƒƒãƒ‘ãƒ¼ã¨ã—ã¦å®Ÿè£…ã™ã‚‹ã“ã¨ãŒå¤šã„ï¼ˆä¾‹: `TagBadge` ã¯å†…éƒ¨ã§ `<Badge>` ã‚’ä½¿ã†ï¼‰ã€‚ |
| `hooks/` | TanStack Query ãƒ™ãƒ¼ã‚¹ã®ã‚«ã‚¹ã‚¿ãƒ  Hookã€‚ãƒšãƒ¼ã‚¸ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆã‹ã‚‰ API ã‚’ç›´æ¥å‘¼ã°ãªã„ã€‚`useSectionLock` ã¨ `useRealtimeSection` ã¯ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç·¨é›†ã®ä¸­æ ¸ã€‚ |
| `lib/api/` | **API å¤‰æ›´ã®å½±éŸ¿ã‚’å¸åã™ã‚‹å”¯ä¸€ã®ãƒ¬ã‚¤ãƒ¤ãƒ¼**ã€‚Repository ãƒ‘ã‚¿ãƒ¼ãƒ³ã§ãƒªã‚¯ã‚¨ã‚¹ãƒˆé–¢æ•°ã‚’åˆ†é›¢ã€‚`client.ts` ã¯å¿…ãšãƒ†ã‚¹ãƒˆï¼ˆ`client.test.ts`ï¼‰ã‚’æ›¸ãã€‚ |
| `lib/supabase/` | Supabase ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆç”Ÿæˆé–¢æ•°ã€‚ãƒ–ãƒ©ã‚¦ã‚¶ç”¨ãƒ»ã‚µãƒ¼ãƒãƒ¼ç”¨ãƒ»Middleware ç”¨ã® 3 ç¨®é¡ã‚’ç”¨æ„ã€‚ |
| `lib/realtime/` | Supabase Realtime ãƒãƒ£ãƒãƒ«ç®¡ç†ã€‚Y.js å·®åˆ†ã® Broadcast ã¨ Y.js Awareness ã«ã‚ˆã‚‹ãƒ­ãƒƒã‚¯çŠ¶æ…‹å…±æœ‰ã€‚è©³ç´°ã¯ [10-realtime-editing.md](./10-realtime-editing.md) ã‚’å‚ç…§ã€‚ |
| `lib/mock/` | **Mock ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆé–‹ç™ºç”¨**ã€‚`data.ts` ã§å½ãƒ‡ãƒ¼ã‚¿å®šç¾©ã€`storage.ts` ã§æ°¸ç¶šåŒ–ã€`migration.ts` ã§ãƒãƒ¼ã‚¸ãƒ§ãƒ³ç®¡ç†ã€‚`NEXT_PUBLIC_USE_MOCK=true` æ™‚ã«ä½¿ç”¨ã€‚[Mock ãƒ•ã‚¡ãƒ¼ã‚¹ãƒˆé–‹ç™º](./09-mock-development.md)å‚ç…§ã€‚ |
| `providers/` | Client Component é™å®šã® Context Providerã€‚`"use client"` å¢ƒç•Œã‚’ã“ã“ã«é›†ç´„ã€‚ |
| `styles/` | SCSS ãƒ‘ãƒ¼ã‚·ãƒ£ãƒ«ã€‚`@use` ã§å„ `.module.scss` ã‹ã‚‰å‚ç…§ã€‚ |
| `types/` | **ãƒ‰ãƒ¡ã‚¤ãƒ³æ¨ªæ–­ã®å…±é€šå‹å®šç¾©**ã€‚API å‹ï¼ˆ`lib/api/types.ts`ï¼‰ã¨ã¯åˆ¥ã«ã€ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹ã‚„å®šæ•°å‹ã‚’ã“ã“ã«é…ç½®ã€‚ |
| `test/` | Vitest ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—ãƒ•ã‚¡ã‚¤ãƒ«ã€‚`setup.ts` ã§ Testing Library ã®ã‚°ãƒ­ãƒ¼ãƒãƒ«è¨­å®šã€`smoke.test.ts` ã§åŸºæœ¬å‹•ä½œç¢ºèªã€‚ |

## å‹å®šç¾©ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½¿ã„åˆ†ã‘

ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆå†…ã§å‹å®šç¾©ã‚’ç®¡ç†ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã¯ä»¥ä¸‹ã® 2 ã¤ãŒã‚ã‚Šã€**æ˜ç¢ºã«è²¬å‹™ã‚’åˆ†ã‘ã¦ä½¿ç”¨ã™ã‚‹**ï¼š

| ãƒ•ã‚¡ã‚¤ãƒ« | ç”¨é€” | å…·ä½“ä¾‹ |
|---------|------|--------|
| **`lib/api/types.ts`** | **API ãƒªã‚¯ã‚¨ã‚¹ãƒˆ/ãƒ¬ã‚¹ãƒãƒ³ã‚¹ã®å‹å®šç¾©** | `PlotResponse`, `PlotListResponse`, `CreatePlotRequest`, `UserProfileResponse` ç­‰ã€‚ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ API ã¨ã‚„ã‚Šå–ã‚Šã™ã‚‹éš›ã®å‹ã‚’ã™ã¹ã¦ã“ã“ã«é›†ç´„ã€‚ |
| **`types/index.ts`** | **ãƒ‰ãƒ¡ã‚¤ãƒ³æ¨ªæ–­ã®å…±é€šå‹ãƒ»ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£å‹** | `Nullable<T>`, `DeepPartial<T>`, ã‚¢ãƒ—ãƒªå›ºæœ‰ã®å®šæ•°å‹ã€åˆ—æŒ™å‹ãªã©ã€‚è¤‡æ•°ã®ãƒ‰ãƒ¡ã‚¤ãƒ³ã§ä½¿ã‚ã‚Œã‚‹æ±ç”¨çš„ãªå‹ã€‚ |

**ä½¿ã„åˆ†ã‘ã®åˆ¤æ–­åŸºæº–ï¼š**

```typescript
// âœ… lib/api/types.ts ã«é…ç½®ã™ã¹ãå‹
export type PlotResponse = { /* API ãƒ¬ã‚¹ãƒãƒ³ã‚¹ */ }
export type CreatePlotRequest = { /* API ãƒªã‚¯ã‚¨ã‚¹ãƒˆ */ }

// âœ… types/index.ts ã«é…ç½®ã™ã¹ãå‹
export type Nullable<T> = T | null;
export type DeepPartial<T> = { [P in keyof T]?: DeepPartial<T[P]> };
export type SortOrder = "asc" | "desc";
export type Theme = "light" | "dark" | "system";
```

**åŸå‰‡:** API ã¨ç›´æ¥é–¢ä¿‚ã™ã‚‹å‹ã¯ `lib/api/types.ts`ã€ãã‚Œä»¥å¤–ã®æ±ç”¨å‹ã¯ `types/index.ts`ã€‚
